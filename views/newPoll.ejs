<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css" />
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.js"></script>
  </head>
  <body>

    <!-- Nav Element -->

          <% if (user) { %>

            <!--Function method to decode img from database -->
            
            <% function decode (arrayBuffer) { %>
              <% return new Buffer (arrayBuffer || '').toString('utf8'); %>
            <% } %>

            <div class="ui menu outer">
              <a class="item" href="/">
                Home
              </a>
              <a class="item" href="/polls/newPoll">
                New Poll
              </a>
              <a class="item" href="/polls/myPoll">
                My Polls
              </a>
                <div class="right menu">
                    <div class ="ui pointing item link dropdown">
                        <span><img class="ui avatar image" src=<%= decode(user.img.data) %> /></span>
                        <i class="dropdown icon"></i>
                        <div class="menu">
                          <div class="header"><%= user.displayName %></div>
                          <div class="item">
                            <a href="/auth/logout">
                              Logout
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="ui container">
              <p class="lead">Make new poll!</p>
              <form class="ui form" method="POST" action="/polls/newPoll">
                <div class="field">
                  <label>Title</label>
                  <input type="text" id="input" name="title" placeholder="Enter your opinion title or vote title" />
                </div>
                <div class="field">
                  <label>Options (separated by comma)</label>
                  <textarea placeholder="Enter your vote options or opinion options" name="options"></textarea>
                </div>
                <button class="ui button positive small" type="submit">Create</button>
              </form>
            </div>

            <% } else { %>

              <div class="ui large menu outer">
                <a class="item" href="/">
                  Home
                </a>
                <div class="right menu">
                  <a class="ui button positive" href="/auth/twitter">
                    Sign In with Twitter
                  </a>
                </div>
              </div>

              <% } %>



    <script type="text/javascript" src="/controllers/clientHandler.js"></script>
  </body>
</html>
